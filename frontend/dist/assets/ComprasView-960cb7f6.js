import{_ as d,r as p,o as r,c as n,a as t,F as _,b as h,d as m,w as f,t as a,f as b,p as g,g as y}from"./index-df8ef575.js";const C={name:"ComprasView",data(){return{productos:[]}},methods:{async obtener_productos(){let e={usuario:this.$store.state.mi_usuario};await fetch("https://n9h5lbsqu4.execute-api.us-east-1.amazonaws.com/prod/productos",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(e)}).then(o=>o.json()).then(o=>this.productos=o),this.productos.filter(o=>o.username!=this.$store.state.mi_usuario)},async comprar(e,o){let c={tenant_id:"UTEC_SHOP",codigo_producto:e,usuario_comprador:this.$store.state.mi_usuario,usuario_vendedor:o};await fetch("https://n9h5lbsqu4.execute-api.us-east-1.amazonaws.com/prod/register_compra",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(c)}),alert("Producto comprado"),this.$router.push("/productos")}},created(){this.obtener_productos()}},v=e=>(g("data-v-2108fd37"),e=e(),y(),e),w={class:"global"},S={class:"compras"},k=v(()=>t("thead",null,[t("tr",null,[t("th",null,"Vendedor"),t("th",null,"Nombre"),t("th",null,"Precio"),t("th",null,"Marca"),t("th",null,"CategorÃ­a"),t("th")])],-1)),x=["onClick"];function V(e,o,c,$,l,i){const u=p("router-link");return r(),n("div",w,[t("div",S,[t("table",null,[k,t("tbody",null,[(r(!0),n(_,null,h(l.productos,s=>(r(),n("tr",{key:s.codigo},[t("td",null,a(s.username),1),t("td",null,a(s.nombre),1),t("td",null,"S/ "+a(s.precio),1),t("td",null,a(s.marca),1),t("td",null,a(s.categoria),1),t("td",null,[t("button",{class:"comprar-button",onClick:N=>i.comprar(s.codigo,s.username)},"Comprar",8,x)])]))),128))])])]),t("nav",null,[m(u,{to:"/home",class:"casa-link"},{default:f(()=>[b("Casa")]),_:1})])])}const P=d(C,[["render",V],["__scopeId","data-v-2108fd37"]]);export{P as default};
